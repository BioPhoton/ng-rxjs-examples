<div class="filters">
  <h2>Filter Selection</h2>

  <form
    *ngIf="(formGroup$ | async) as form"
    [formGroup]="form">

    <fieldset class="search-fieldset" *ngIf="form.get('value')">
      <label for="value">Search:</label>
      <input
        id="value"
        type="text"
        formControlName="value">
    </fieldset>

    <fieldset class="filter-fieldset"
      *ngIf="form.get('selectedProps') as selectedProps"
      [formGroup]="selectedProps">

      <label
        [for]="c.key"
        *ngFor="let c of selectedProps.controls | keyvalue">

        {{c.key}}

        <input
          [id]="c.key"
          type="checkbox"
          [formControlName]="c.key"
          [checked]="c.value.value ? 'checked' : ''">

      </label>

    </fieldset>

  </form>

</div>
